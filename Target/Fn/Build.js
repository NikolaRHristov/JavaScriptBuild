import f from"../Fn/File.js";import m from"../Object/Option.js";import{exec as s}from"child_process";import{deepmerge as a}from"deepmerge-ts";import{build as c,analyzeMetafile as n}from"esbuild";import u from"fast-glob";var E=async(l,e)=>{const i=[];for(const t of l)for(const p of await u(t.replaceAll("'","").replaceAll('"',"")))i.push(p);const r=a(m,{entryPoints:Object.fromEntries(i.map(t=>[t.replace("Source/","").split(".").slice(0,-1).join("."),t]))}),o=await c(e?.ESBuild?a(r,await f(e?.ESBuild)):r);console.log(o.metafile?await n(o.metafile,{verbose:!0}):{}),e?.TypeScript?s(`tsc -p ${e?.TypeScript}`):s("tsc")};export{E as default};
